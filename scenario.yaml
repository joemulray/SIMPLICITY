# start and finish steps in scenario
first_step: init
last_step: done
default_help:
  - "To find a branch, say branch. \
    To view your balance, say balance."


steps:
  # minimal description for the first step
  init:
    events:
      launched:
        next: choose_module

  # step name
  choose_module:
    # if wrong intent was invoked, ask user again with one of the phrases (random choice)
    reprompt:
      - "Sorry, I didn't understand. \
      To view your balance, say. my balance. \
      To find the nearest branch, say. find me the nearest bank. \
      To find the nearest atm, say. I need and ATM. \
      for how many branches are nearby, say. how many branches are around."
    # help phrases for the current step
    help:
      - "say: balance or find me the nearest bank or I need an ATM or how many branches are around"
    events:
    #choose path based on function triggered from intent
      nearest_branch:
        next: done
      nearest_atm:
        next: done
      BalanceSelected:
        next: pin_check
      num_branches_nearby:
        next: done


  pin_check:
    reprompt:
      - "Sorry, I didn't understand. please say a number."
    help:
      - "Say a number"

    events:
      PinCheck:
        next: transfer


  transfer:
    reprompt:
      - "Sorry I could not find the account, please try again."
    help:
      - "Say an account"

    events:
      transfer_internal:
        next: done

# no need to describe last step
  done: