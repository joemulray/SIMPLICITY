# start and finish steps in scenario
first_step: init
last_step: done
default_help:
  - "To find a branch, say branch. \
    To view your balance, say balance."


steps:
  # minimal description for the first step
  init:
    events:
      launched:
        next: choose_module

  # step name
  choose_module:
    # if wrong intent was invoked, ask user again with one of the phrases (random choice)
    reprompt:
      - "Sorry, I didn't understand. \
      For account managment, say: my account. \
      To find the nearest branch, say: find me the nearest bank. \
      To find the nearest atm, say: I need and ATM. \
      for how many branches are nearby, say: how many branches are around."
    # help phrases for the current step
    help:
      - "say: account or find me the nearest bank or I need an ATM or how many branches are around"
    events:
    #choose path based on function triggered from intent
      nearest_branch:
        next: done
      nearest_atm:
        next: done
      LoginSelected:
        next: pin_check
      num_branches_nearby:
        next: done


  pin_check:
    reprompt:
      - "Sorry, I didn't understand. please say a number."
    help:
      - "Say a number"

    events:
      PinCheck:
        next: account_operation

  account_operation:
    reprompt:
      - "Sorry, I didn't understand. please say: transfer funds or view balance"
    help:
      - "say: transfer funds or view balance"

    events:
      TransferExplain:
        next: transfer
      BalanceExplain:
        next: balance

  transfer:
    reprompt:
      - "Sorry, I could not find the account, please try again."
    help:
      - "Say an account"

    events:
      transfer_internal:
        next: done

  balance:
    reprompt:
      - "Sorry, I could not find the account, please try again."
    help:
      - "say an account"

    events:
      ViewBalance:
        next: done



# no need to describe last step
  done: